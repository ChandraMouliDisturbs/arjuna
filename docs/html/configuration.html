
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test Configuration &#8212; Arjuna 0.9.18 documentation</title>
    <link rel="stylesheet" href="_static/flask.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Driven Testing" href="ddt.html" />
    <link rel="prev" title="Tests are Test Functions" href="test_function.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = './';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ddt.html" title="Data Driven Testing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="test_function.html" title="Tests are Test Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Arjuna 0.9.18 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="test-configuration">
<span id="configuration"></span><h1>Test Configuration<a class="headerlink" href="#test-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="understanding-configuration-system-of-arjuna">
<h2>Understanding Configuration System of Arjuna<a class="headerlink" href="#understanding-configuration-system-of-arjuna" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Arjuna supports tweaking its built in options which are represented by <cite>ArjunaOption</cite> enum.</p></li>
<li><p>Arjuna also supports user defined options.</p></li>
<li><p>A <cite>Configuration</cite> object represents fixed values for configured settings (Arjuna options as well user defined options).</p></li>
<li><p>A <cite>Configuration</cite> is immutable which means that once created it can not be modified.</p></li>
<li><dl class="simple">
<dt>As a part of initialation, Arjuna creates the reference <cite>Configuration</cite> object which combines the following to create the reference :</dt><dd><ul>
<li><p>Default settings for Arjuna options</p></li>
<li><p>Project level settings included in <cite>&lt;Project root directory&gt;/config/project.conf</cite> file.</p></li>
<li><p>Environment configuration represented by its name passed as <cite>–run-env</cite> switch.</p></li>
<li><p>Run-time configuration file provided with <cite>–run-conf</cite> switch.</p></li>
<li><p>CLI options represtedn by Arjuna’s named CLI switches (e.g. for logging options)</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>You can get the reference configuration by calling <cite>Arjuna.get_config()</cite>.</p></li>
<li><p>Within test or test fixture code, we can also get the reference configuration object (if not re-assigned by test author to a non-reference configuration) using <cite>request.config</cite>.</p></li>
</ul>
</div>
<div class="section" id="project-conf-setting-project-level-configuration-options">
<h2>project.conf - Setting Project Level Configuration Options<a class="headerlink" href="#project-conf-setting-project-level-configuration-options" title="Permalink to this headline">¶</a></h2>
<p>Many a times, it is useful to change the defaults of Arjuna at project level to avoid writing code every time. It is also a much better way when you need to tweak quite a few settings and you know that those settings are applicable to most of your tests.</p>
<p>In Arjuna you can do this by providing options under <cite>arjunaOptions</cite> section in <cite>&lt;Project root directory&gt;/config/project.conf</cite> file. The contents of <cite>arjunaOptions</cite> follow [HOCON](<a class="reference external" href="https://github.com/lightbend/config/blob/master/HOCON.md">https://github.com/lightbend/config/blob/master/HOCON.md</a>) syntax. This means that you can write settings in properties syntax, as JSON or as human-readable JSON syntax supported by HOCON.</p>
<p>For example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">arjunaOptions</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">firefox</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add the above content to <cite>project.conf</cite> file. We want to tweak <cite>ArjunaOption.BROWSER_NAME</cite>. Correspondingly you can add entry for <cite>BROWSER_NAME</cite> in <cite>arjunaOptions</cite>. For being more intuitive and less mistake prone, Arjuna supports keys in this section as <strong>case-insensitive</strong> and treats <strong>. (dot)</strong> and <strong>_ (underscore)</strong> as interchangeable. This is similar to the behavior of option name string seen in previous section.</p>
</div>
<div class="section" id="configuration-builder-creating-custom-configurations">
<h2>Configuration Builder - Creating Custom Configurations<a class="headerlink" href="#configuration-builder-creating-custom-configurations" title="Permalink to this headline">¶</a></h2>
<p>In Arjuna, you can create your own configurations as well. You can do this by using reference Configuration or any other configuration created by you as the source object.</p>
<p>Given a <cite>Configuration</cite> object (say <cite>config</cite>), you can get a <cite>ConfigBuilder</cite> object with <cite>config.builder</cite> property. You can add options to the builder and then call its <cite>register</cite> method to create a new configuration. This newly created configuration is returned by the <cite>register</cite> call.</p>
<p>Sometimes it is useful to provide your own name to the custom configuration that you are creating. Arjuna helps you in creating the configuration in one place and retrieving it in another place. You need not pass the configuration object around for simple needs of this nature. To achieve this pass the name while registering: <cite>register(&lt;name&gt;)</cite>. It can also now be retrived anywhere in your project with the <cite>Arjuna.get_config(&lt;name&gt;)</cite> call. Within a test, it can also be retrieve by using <cite>request.get_config(&lt;name&gt;)</cite> call.</p>
<p><cite>ConfigBuilder</cite> also provides direct methods for some commonly used Arjuna Options. For example <cite>.firefox()</cite> is equivalent to <cite>.option(“browser.name”, BrowserName.FIREFOX)</cite></p>
</div>
<div class="section" id="defining-and-handling-user-options">
<h2>Defining and Handling User Options<a class="headerlink" href="#defining-and-handling-user-options" title="Permalink to this headline">¶</a></h2>
<p>Just like Arjuna options, you can define your own options in <cite>project.conf</cite> file as well as programmatically. Rest of the fundamentals remain same as Arjuna options. That’s the key point! Arjuna provides you the same facilities for your own defined options that it provides to built-in <a href="#id1"><span class="problematic" id="id2">`</span></a>ArjunaOption`s.</p>
<div class="section" id="user-options-in-project-conf">
<h3>User Options in Project Conf<a class="headerlink" href="#user-options-in-project-conf" title="Permalink to this headline">¶</a></h3>
<p>In Arjuna you can define your own option under <cite>userOptions</cite> section in <cite>&lt;Project root directory&gt;/config/project.conf</cite> file.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">userOptions</span> <span class="p">{</span>
    <span class="nx">target</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;https://google.com&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-user-options-programmatically">
<h3>Adding User Options Programmatically<a class="headerlink" href="#adding-user-options-programmatically" title="Permalink to this headline">¶</a></h3>
<p>You can also add user options programmatically using the <cite>ConfigBuilder</cite> object just like we use it for tweaking Ajuna’s builtin-options.</p>
<p>Retrieving the values is same as retrieving <a href="#id3"><span class="problematic" id="id4">`</span></a>ArjunaOption`s.</p>
</div>
</div>
<div class="section" id="configuration-builder-adding-options-from-a-conf-file">
<h2>Configuration Builder - Adding options from a .conf File<a class="headerlink" href="#configuration-builder-adding-options-from-a-conf-file" title="Permalink to this headline">¶</a></h2>
<p><cite>ConfigBuilder</cite> can also load Arjuna options as well user options from <cite>.conf</cite> files. It comes handy when you have a controlled set of configurations which want to create at run-time. It could be also helpful if for some reasons your logic involves clubbing of options from multiple files.</p>
<p>You can load options from any file using <cite>from_file</cite> method of <cite>ConfigBuilder</cite> and providing the file path.</p>
</div>
<div class="section" id="the-magic-c-function">
<h2>The Magic C Function<a class="headerlink" href="#the-magic-c-function" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h3>
<p>Arjuna provides a special function <cite>C</cite> for retrieving values from the reference configuration as it is a very common operation to do on test code. You can pass an <cite>ArjunaOption</cite> enum constant or an option name. The name string has all the flexibility seen in previous example.</p>
</div>
<div class="section" id="configuration-query-format">
<h3>Configuration Query Format<a class="headerlink" href="#configuration-query-format" title="Permalink to this headline">¶</a></h3>
<p>As Arjuna supports a multi-configuration system, it also provides a special query syntax for retrieving configuration values.</p>
<p>You can use the configuration query syntax <cite>&lt;confname&gt;.&lt;option&gt;</cite> to retrieve configuration values for a given configuration.</p>
<p>Let’s say we have custom configuration with name <cite>nconf</cite>.
- <cite>browser.name</cite> refers to the property in reference configuration.
- You can prefix a configuration name with a configuration name. For example <cite>reference.browser.name</cite> and <cite>nconf.browser.name</cite> will retrieve <cite>browser.name</cite> from <cite>reference</cite> and <cite>nconf</cite> configurations respectively.</p>
</div>
</div>
<div class="section" id="environment-configurations">
<h2>Environment Configurations<a class="headerlink" href="#environment-configurations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Purpose<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>In today’s Agile environments, typically testers run automated tests on multiple environments. These environments could have their own respective properties (e.g. Application URL, user name, password and so on.)</p>
<p>In Arjuna, you can define configurations for environments and use them very easily in your test automation framework.</p>
</div>
<div class="section" id="defining-and-using-environment-configurations">
<h3>Defining and Using Environment Configurations<a class="headerlink" href="#defining-and-using-environment-configurations" title="Permalink to this headline">¶</a></h3>
<p>You can define one or more <cite>environment_name.conf</cite> files exactly like a <cite>project.conf</cite> file. Place these files in <cite>&lt;Project Root&gt;/config/env</cite> directory. Arjuna automatically loads these files.</p>
<p>You can retrieve an environment config by its name using <cite>Arjuna.get_config</cite> or <cite>request.get_config</cite> call. Now you can inquire the values just like you deal with any configuration in Arjuna. You can also retrieve their options using the magic <cite>C</cite> function, for example <cite>C(“tevn.browser.name”)</cite></p>
</div>
<div class="section" id="making-an-environment-configuration-as-the-default">
<h3>Making an environment configuration as the default<a class="headerlink" href="#making-an-environment-configuration-as-the-default" title="Permalink to this headline">¶</a></h3>
<p>You can do a session wide update that the reference configuration should utilize configuration values from a given environment config.</p>
<p>You can do this by providing <cite>–run-env &lt;env_name&gt;</cite> CLI switch.</p>
</div>
</div>
<div class="section" id="run-configuration-overriding-configuration-with-a-configuration-file-for-a-test-run">
<h2>Run Configuration: Overriding Configuration with a Configuration File for a Test Run<a class="headerlink" href="#run-configuration-overriding-configuration-with-a-configuration-file-for-a-test-run" title="Permalink to this headline">¶</a></h2>
<p>With today’s integration needs, at times you might need to create a configuration outside of Arjuna test project’s structure and instruct Arjuna to do a session wide update that the reference configuration should utilize configuration values from a configuration file at a given path.</p>
<p>You can do this by providing <cite>–run-conf &lt;file name or path&gt;</cite> CLI switch.</p>
</div>
<div class="section" id="combining-environment-and-run-configuration">
<h2>Combining Environment and Run Configuration<a class="headerlink" href="#combining-environment-and-run-configuration" title="Permalink to this headline">¶</a></h2>
<p>If you pass the <cite>–run-env</cite> and <cite>run-conf</cite> switches together:
1. Arjuna first does a reference config update from run-env named conf file.
2. Then it updates the configuration with the one at run-conf path.</p>
</div>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Test Configuration</a><ul>
<li><a class="reference internal" href="#understanding-configuration-system-of-arjuna">Understanding Configuration System of Arjuna</a></li>
<li><a class="reference internal" href="#project-conf-setting-project-level-configuration-options">project.conf - Setting Project Level Configuration Options</a></li>
<li><a class="reference internal" href="#configuration-builder-creating-custom-configurations">Configuration Builder - Creating Custom Configurations</a></li>
<li><a class="reference internal" href="#defining-and-handling-user-options">Defining and Handling User Options</a><ul>
<li><a class="reference internal" href="#user-options-in-project-conf">User Options in Project Conf</a></li>
<li><a class="reference internal" href="#adding-user-options-programmatically">Adding User Options Programmatically</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-builder-adding-options-from-a-conf-file">Configuration Builder - Adding options from a .conf File</a></li>
<li><a class="reference internal" href="#the-magic-c-function">The Magic C Function</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#configuration-query-format">Configuration Query Format</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment-configurations">Environment Configurations</a><ul>
<li><a class="reference internal" href="#id5">Purpose</a></li>
<li><a class="reference internal" href="#defining-and-using-environment-configurations">Defining and Using Environment Configurations</a></li>
<li><a class="reference internal" href="#making-an-environment-configuration-as-the-default">Making an environment configuration as the default</a></li>
</ul>
</li>
<li><a class="reference internal" href="#run-configuration-overriding-configuration-with-a-configuration-file-for-a-test-run">Run Configuration: Overriding Configuration with a Configuration File for a Test Run</a></li>
<li><a class="reference internal" href="#combining-environment-and-run-configuration">Combining Environment and Run Configuration</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="test_function.html" title="previous chapter">Tests are Test Functions</a>
          <li>Next: <a href="ddt.html" title="next chapter">Data Driven Testing</a>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Rahul Verma.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>